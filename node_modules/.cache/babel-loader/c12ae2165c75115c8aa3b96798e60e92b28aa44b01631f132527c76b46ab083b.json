{"ast":null,"code":"export class CalculateCommissionsUseCase {\n  /**\r\n   * \r\n   * @param {Object} params\r\n   * @param {Array} params.sales \r\n   * @param {Array} params.vendors \r\n   * @param {Array} params.rules \r\n   * @returns {Array} \r\n   */\n  execute({\n    sales,\n    vendors,\n    rules\n  }) {\n    const sortedRules = [...rules].sort((a, b) => b.amount - a.amount);\n    return vendors.map(vendor => {\n      const salesForVendor = sales.filter(sale => sale.vendedor_id === vendor.id);\n      let totalCommission = 0;\n      salesForVendor.forEach(sale => {\n        const applicableRule = sortedRules.find(rule => sale.monto >= rule.amount);\n        if (applicableRule) {\n          totalCommission += sale.monto * applicableRule.rule;\n        }\n      });\n      return {\n        name: vendor.nombre,\n        totalCommission\n      };\n    });\n  }\n}","map":{"version":3,"names":["CalculateCommissionsUseCase","execute","sales","vendors","rules","sortedRules","sort","a","b","amount","map","vendor","salesForVendor","filter","sale","vendedor_id","id","totalCommission","forEach","applicableRule","find","rule","monto","name","nombre"],"sources":["C:/Users/Usuario/Desktop/Calculo de comisiones MVC/src/domain/useCases/CalculateCommissionsUseCase.js"],"sourcesContent":["export class CalculateCommissionsUseCase {\r\n  /**\r\n   * \r\n   * @param {Object} params\r\n   * @param {Array} params.sales \r\n   * @param {Array} params.vendors \r\n   * @param {Array} params.rules \r\n   * @returns {Array} \r\n   */\r\n  execute({ sales, vendors, rules }) {\r\n    \r\n\r\n    const sortedRules = [...rules].sort((a, b) => b.amount - a.amount);\r\n\r\n    return vendors.map(vendor => {\r\n\r\n      const salesForVendor = sales.filter(sale => sale.vendedor_id === vendor.id);\r\n      \r\n      let totalCommission = 0;\r\n\r\n\r\n      salesForVendor.forEach(sale => {\r\n\r\n        const applicableRule = sortedRules.find(rule => sale.monto >= rule.amount);\r\n        \r\n        if (applicableRule) {\r\n\r\n          totalCommission += sale.monto * applicableRule.rule;\r\n        }\r\n      });\r\n\r\n      return {\r\n        name: vendor.nombre,\r\n        totalCommission,\r\n      };\r\n    });\r\n  }\r\n}"],"mappings":"AAAA,OAAO,MAAMA,2BAA2B,CAAC;EACvC;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,OAAOA,CAAC;IAAEC,KAAK;IAAEC,OAAO;IAAEC;EAAM,CAAC,EAAE;IAGjC,MAAMC,WAAW,GAAG,CAAC,GAAGD,KAAK,CAAC,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKA,CAAC,CAACC,MAAM,GAAGF,CAAC,CAACE,MAAM,CAAC;IAElE,OAAON,OAAO,CAACO,GAAG,CAACC,MAAM,IAAI;MAE3B,MAAMC,cAAc,GAAGV,KAAK,CAACW,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,WAAW,KAAKJ,MAAM,CAACK,EAAE,CAAC;MAE3E,IAAIC,eAAe,GAAG,CAAC;MAGvBL,cAAc,CAACM,OAAO,CAACJ,IAAI,IAAI;QAE7B,MAAMK,cAAc,GAAGd,WAAW,CAACe,IAAI,CAACC,IAAI,IAAIP,IAAI,CAACQ,KAAK,IAAID,IAAI,CAACZ,MAAM,CAAC;QAE1E,IAAIU,cAAc,EAAE;UAElBF,eAAe,IAAIH,IAAI,CAACQ,KAAK,GAAGH,cAAc,CAACE,IAAI;QACrD;MACF,CAAC,CAAC;MAEF,OAAO;QACLE,IAAI,EAAEZ,MAAM,CAACa,MAAM;QACnBP;MACF,CAAC;IACH,CAAC,CAAC;EACJ;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}